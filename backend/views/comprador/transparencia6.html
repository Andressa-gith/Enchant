<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Enchant | Parcerias</title>
    <link rel="shortcut icon" href="https://i.ibb.co/7NybZ3W7/1.png" type="image/x-icon">

    <link
        href="https://fonts.googleapis.com/css2?family=Passion+One:wght@700&family=Lexend+Deca:wght@300;400;500;600&display=swap"
        rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" />

    <link rel="stylesheet" href="/styles/global.css">
    <link rel="stylesheet" href="/styles/comprador/parcerias.css">

    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js" defer></script>
    <script src="/scripts/authGuard.js" type="module"></script>
    <script src="/scripts/layouts/comprador/sidebar.js" type="module" defer></script>
    <script src="/scripts/layouts/comprador/headercomprador.js" type="module" defer></script>
    <script src="/scripts/comprador/transparencia6.js" type="module" defer></script>
    <script src="/scripts/layouts/enchant/loader.js" type="module" defer></script>
    <!--LOADER-->
    <script src="/scripts/layouts/enchant/loader.js" type="module" defer></script>
</head>

<body>
    <!--LOADER-->

    <body class="auto-loader">
        <div class="container">

            <h1 class="tite">Parcerias</h1>

            <p>Gerencie e publique parcerias estratégicas para fortalecer a transparência e a colaboração com outras
                organizações.</p>

            <div class="form-section">
                <div class="validation-info">
                    <h4>Requisitos para parcerias:</h4>
                    <ul>
                        <li>Título deve identificar claramente o tipo e período da auditoria</li>
                        <li>Data não pode ser futura nem anterior a 5 anos</li>
                        <li>Tipo de parceiros deve ser especificado corretamente</li>
                        <li>Status deve refletir a situação atual do processo</li>
                    </ul>
                </div>

                <div id="success-message" class="success-message" style="display: none;"></div>
                <div id="alert-message" class="alert-message" style="display: none;"></div>

                <div class="form-title">Cadastrar Nova Parceria</div>

                <form id="partnershipForm">
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="partnerName">Nome do Parceiro/Organização</label>
                            <input type="text" id="partnerName" name="nome" placeholder="Ex: Empresa XYZ">
                            <div class="error-message" id="partnerName-error"></div>
                        </div>
                        <div class="form-group">
                            <label for="partnershipValue">Valor da Parceria (R$)</label>
                            <input type="number" id="partnershipValue" name="valor_total_parceria" placeholder="0,00"
                                step="0.01" min="0">
                            <div class="error-message" id="partnershipValue-error"></div>
                        </div>
                        <div class="form-group">
                            <label for="startDate">Data de Início</label>
                            <input type="date" id="startDate" name="data_inicio">
                            <div class="error-message" id="startDate-error"></div>
                        </div>
                        <div class="form-group">
                            <label for="endDate">Data de Término</label>
                            <input type="date" id="endDate" name="data_fim">
                            <div class="error-message" id="endDate-error"></div>
                        </div>
                        <div class="form-group">
                            <label for="partnerType">Tipo de Parceiro</label>
                            <select id="partnerType" name="tipo_setor">
                                <option disabled selected>Selecione...</option>
                                <option value="Público">Público</option>
                                <option value="Privado">Privado</option>
                            </select>
                            <div class="error-message" id="partnerType-error"></div>
                        </div>
                        <div class="form-group">
                            <label for="status">Status</label>
                            <select id="status" name="status">
                                <option disabled selected>Selecione...</option>
                                <option value="Ativo">Ativo</option>
                                <option value="Inativo">Inativo</option>
                                <option value="Finalizado">Finalizado</option>
                            </select>
                            <div class="error-message" id="status-error"></div>
                        </div>
                    </div>
                    <div class="form-group" style="margin-top: 20px;">
                        <label for="objective">Objetivo da Parceria</label>
                        <textarea id="objective" name="objetivos"
                            placeholder="Descreva o objetivo e finalidade da parceria..."></textarea>
                        <div class="error-message" id="objective-error"></div>
                    </div>
                    <button type="submit" class="um">Adicionar Parceria</button>
                </form>

            </div>

            <div class="stats-grid">
                <div class="stat-card highlight">
                    <div class="stat-value" id="totalValue">R$ 0,00</div>
                    <div class="stat-label">Valor Total (Ativas)</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="totalPartnerships">0</div>
                    <div class="stat-label">Total de Parcerias</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="activePartnerships">0</div>
                    <div class="stat-label">Ativas e Vigentes</div>
                </div>
            </div>


            <div class="uploaded-items">
                <h3>Parcerias adicionadas</h3>
                <div id="loader" style="display: none; text-align: center; padding: 2rem;">
                    <div class="spinner"></div> Carregando...
                </div>
                <div id="empty-state" style="display: none; text-align: center; padding: 2rem;">Nenhuma parceria
                    adicionada
                    ainda.</div>
                <div class="partners-cards" id="partners-list"></div>
            </div>

            <!-- Modal para edição -->
            <div class="modal fade" id="editModal" tabindex="-1">
                <div class="modal-dialog modal-lg modal-dialog-centered">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title">Editar Parceria</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                        </div>
                        <div class="modal-body">
                            <form id="editPartnershipForm">
                                <input type="hidden" id="editPartnerId" name="id">
                                <div class="form-grid">
                                    <div class="form-group">
                                        <label for="editPartnerName">Nome do Parceiro/Organização</label>
                                        <input type="text" id="editPartnerName" name="nome">
                                        <div class="error-message" id="editPartnerName-error"></div>
                                    </div>
                                    <div class="form-group">
                                        <label for="editPartnershipValue">Valor da Parceria (R$)</label>
                                        <input type="number" id="editPartnershipValue" name="valor_total_parceria"
                                            step="0.01" min="0">
                                        <div class="error-message" id="editPartnershipValue-error"></div>
                                    </div>
                                    <div class="form-group">
                                        <label for="editStartDate">Data de Início</label>
                                        <input type="date" id="editStartDate" name="data_inicio">
                                        <div class="error-message" id="editStartDate-error"></div>
                                    </div>
                                    <div class="form-group">
                                        <label for="editEndDate">Data de Término</label>
                                        <input type="date" id="editEndDate" name="data_fim">
                                        <div class="error-message" id="editEndDate-error"></div>
                                    </div>
                                    <div class="form-group">
                                        <label for="editPartnerType">Tipo de Parceiro</label>
                                        <select id="editPartnerType" name="tipo_setor">
                                            <option disabled selected>Selecione...</option>
                                            <option value="Público">Público</option>
                                            <option value="Privado">Privado</option>
                                        </select>
                                        <div class="error-message" id="editPartnerType-error"></div>
                                    </div>
                                    <div class="form-group">
                                        <label for="editStatus">Status</label>
                                        <select id="editStatus" name="status">
                                            <option disabled selected>Selecione...</option>
                                            <option value="Ativo">Ativo</option>
                                            <option value="Inativo">Inativo</option>
                                            <option value="Finalizado">Finalizado</option>
                                        </select>
                                        <div class="error-message" id="editStatus-error"></div>
                                    </div>
                                </div>
                                <div class="form-group" style="margin-top: 20px;">
                                    <label for="editObjective">Objetivo da Parceria</label>
                                    <textarea id="editObjective" name="objetivos" style="height: 150px;"></textarea>
                                    <div class="error-message" id="editObjective-error"></div>
                                </div>
                            </form>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                            <button type="button" class="btn btn-primary" id="saveEditBtn">Salvar Alterações</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    </body>

</html>