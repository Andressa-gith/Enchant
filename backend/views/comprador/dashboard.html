<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard</title>
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css"/>
    <link rel="shortcut icon" href="https://i.ibb.co/7NybZ3W7/1.png" type="image/x-icon">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    
    <link rel="stylesheet" href="/styles/comprador/dashboard.css">
    <link rel="stylesheet" href="/styles/global.css">

    <script src="/scripts/layouts/comprador/headercomprador.js" type="module"></script>
    <script src="/scripts/layouts/comprador/sidebar.js" type="module"></script>
    <script src="/scripts/comprador/dashboard.js" type="module"></script>

</head>
<body>
    <header id="header-container"></header>
    <aside id="sidebar-container"></aside>

    <main id="main">
        <div class="dashboard-container">

            <header class="dashboard-header">
                <h1 id="boas-vindas">Carregando...</h1>
                <div class="header-filters">
                    <div class="btn-group date-filter-group" role="group">
                        <button type="button" class="btn btn-date-filter active" onclick="filtrarPeriodo('mes')">Este Mês</button>
                        <button type="button" class="btn btn-date-filter" onclick="filtrarPeriodo('3meses')">Últimos 3 Meses</button>
                        <button type="button" class="btn btn-date-filter" onclick="filtrarPeriodo('ano')">Este Ano</button>
                    </div>
                </div>
            </header>
        
            <section class="summary-section">
                <div class="summary-card">
                    <div class="summary-card-icon"><i class="bi bi-box-seam"></i></div>
                    <div class="summary-card-info">
                        <div class="summary-card-value" id="kpi-total-itens">--</div>
                        <div class="summary-card-label">Itens Recebidos</div>
                    </div>
                </div>
                <div class="summary-card">
                    <div class="summary-card-icon"><i class="bi bi-cash-coin"></i></div>
                    <div class="summary-card-info">
                        <div class="summary-card-value" id="kpi-total-financeiro">R$ --</div>
                        <div class="summary-card-label">Arrecadação Financeira</div>
                    </div>
                </div>
                <div class="summary-card">
                    <div class="summary-card-icon"><i class="bi bi-people-fill"></i></div>
                    <div class="summary-card-info">
                        <div class="summary-card-value" id="kpi-doadores-unicos">--</div>
                        <div class="summary-card-label">Doadores no Período</div>
                    </div>
                </div>
                <div class="summary-card">
                    <div class="summary-card-icon"><i class="bi bi-tag-fill"></i></div>
                    <div class="summary-card-info">
                        <div class="summary-card-value" id="kpi-principal-categoria">--</div>
                        <div class="summary-card-label">Principal Categoria</div>
                    </div>
                </div>
            </section>

            <section class="chart-and-sidebar-section">
                <div class="chart-wrapper">
                    <article class="chart-card">
                        <header class="chart-header d-flex justify-content-between align-items-center">
                            <h2 class="chart-title">Visão Geral de Doações</h2>
                            <select id="filtro-grafico-categoria" class="form-select form-select-sm" style="max-width: 200px;">
                                <option value="todos" selected>Todas as Categorias</option>
                                <option value="alimentos">Alimentos (Kg)</option>
                                <option value="roupas">Roupas (Peças)</option>
                                <option value="higiene">Higiene (Unidades)</option>
                                <option value="brinquedos">Brinquedos/Livros (Unidades)</option>
                                <option value="moveis">Móveis (Unidades)</option>
                                <option value="cama">Roupas de Cama (Peças)</option>
                                <option value="financeiro">Financeiro (R$)</option>
                            </select>
                        </header>
                        <div class="chart-container">
                            <canvas id="doacoesChart"></canvas>
                        </div>
                    </article>
                </div>
                
                <aside class="points-sidebar">
                    <div class="sidebar-card">
                        <h3 class="sidebar-title">Últimas Atividades</h3>
                        <div id="lista-atividades-recentes">
                            <p class="text-muted">Carregando...</p>
                        </div>
                    </div>
                </aside>
            </section>
            
            <section class="stats-section">
                    <h3 class="section-title">Totais por Categoria (no período)</h3>
                    <div class="stats-grid-row">
                    <div class="stat-card">
                        <div class="stat-number" id="stat-alimentos">--</div>
                        <div class="stat-label">Alimentos (Kg)</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="stat-roupas">--</div>
                        <div class="stat-label">Roupas (Peças)</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="stat-higiene">--</div>
                        <div class="stat-label">Higiene (Un.)</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="stat-brinquedos">--</div>
                        <div class="stat-label">Brinquedos/Livros (Un.)</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="stat-moveis">--</div>
                        <div class="stat-label">Móveis (Un.)</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="stat-cama">--</div>
                        <div class="stat-label">Roupas de Cama (Peças)</div>
                    </div>
                </div>
            </section>
        </div>
    </main>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>